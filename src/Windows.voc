; ----------------------------------------------------------------------------
; Vocabulaire WINDOWS

#ifdef WITH_WINDOWS_VOC

#ifldef WINDOWS_LINK
#echo "Ajout entÃªte du vocabulaire WINDOWS"

WINDOWS_voc = RAM_START-2+(*-DictInitTable)
        .byte   $81,$A0
        .word   last_windows_word_nfa

#else
#echo "Ajout du vocabulaire WINDOWS"

;-PREV_VOC_LINK = last_voc_link
;-last_voc_link = WINDOWS_LINK

; last_forth_word_nfa = GRAFX_nfa

WINDOWS_nfa:
        .byte   $C7
        .byte   "WINDOW"
        .byte   $D3
; ----------------------------------------------------------------------------
        .word   last_forth_word_nfa
        .word   DODOES
        .word   DOVOC
        .word   WINDOWS_voc
WINDOWS_LINK:
;        .word   GRAFX_LINK
        .word   last_voc_link

-last_voc_link = WINDOWS_LINK
-last_forth_word_nfa = WINDOWS_nfa

; ----------------------------------------------------------------------------
; WINDOW:_nfa
WINDOWCOL_nfa:
        .byte   $87
        .byte   "WINDOW"
        .byte   $BA
; ----------------------------------------------------------------------------
        .word   FORTH_voc
        .word   DOCOL
        .word   BUILDS
        .word   ROT
        .word   TOR
        .word   ROT
        .word   CCOMMA
        .word   RFROM
        .word   CCOMMA
        .word   SWAP
        .word   CCOMMA
        .word   CCOMMA
        .word   LIT
        .word   SCRTXT
        .word   COMMA
        .word   DOES
DOWINDOW:
        .word   AYX
        .word   TWOSTORE
        .word   LIT
        .word   XSCRSE
        .word   MON
        .word   LIT
        .word   XCSSCR
        .word   MON
        .word   SEMIS
; ----------------------------------------------------------------------------
MSGW_nfa:
        .byte   $84
        .byte   "MSG"
        .byte   $D7
; ----------------------------------------------------------------------------
        .word   WINDOWCOL_nfa
        .word   DODOES
        .word   DOWINDOW
; ----------------------------------------------------------------------------
        .byte   $00,$27,$00,$00,$80,$BB
; ----------------------------------------------------------------------------
SCRW_nfa:
        .byte   $84
        .byte   "SCR"
        .byte   $D7
; ----------------------------------------------------------------------------
        .word   MSGW_nfa
SCRW:
        .word   DODOES
        .word   DOWINDOW
; ----------------------------------------------------------------------------
        .byte   $00,$27,$01,$1B,$80,$BB
; ----------------------------------------------------------------------------
CURSOR_nfa:
        .byte   $86
        .byte   "CURSO"
        .byte   $D2
; ----------------------------------------------------------------------------
        .word   SCRW_nfa
CURSOR:
        .word   LE594
; ----------------------------------------------------------------------------
LE594:
        stx     _XSAVE
        lsr     BOT,x
        lda     SECOND,x
        tax
        bcc     LE5A2
        brk  :  .byte XCSSCR                    ; Telemon
        jmp     LE5A4

; ----------------------------------------------------------------------------
LE5A2:
        brk  :  .byte XCOSCR                    ; Telemon
LE5A4:
        ldx     _XSAVE
        jmp     POPTWO

; ----------------------------------------------------------------------------
SCROLL_nfa:
        .byte   $86
        .byte   "SCROL"
        .byte   $CC
; ----------------------------------------------------------------------------
        .word   CURSOR_nfa
        .word   LE5B4
; ----------------------------------------------------------------------------
LE5B4:
        lda     #$04
        jsr     SETUP
        stx     _XSAVE
        lda     N+6
        sta     SCRNB
        ldx     N+4
        ldy     N+2
        lda     N
        bne     LE5CC
        brk  :  .byte XSCROB                    ; Telemon
        jmp     LE5CE

; ----------------------------------------------------------------------------
LE5CC:
        brk  :  .byte XSCROH                    ; Telemon
LE5CE:
        ldx     _XSAVE
        jmp     NEXT

last_windows_word_nfa = SCROLL_nfa
#endif

#endif
